App.Control.install({el:".js-fancy-media",name:"FancyMedia",initialize:function(){var t=!this.$el.data("fullsize");this.$el.fancybox({wrapCSS:"fancy-media",margin:937<$(window).width()?20:5,fitToView:t,autoResize:!0,maxWidth:"100%",helpers:{overlay:{css:{background:"rgba(27, 71, 105, 0.7)"}}}})}}),App.Control.install({el:".js-fancy-lightbox",name:"FancyMedia",initialize:function(){this.$el.fancybox({autoResize:!0,wrapCSS:"fancy-lightbox",maxWidth:"100%",padding:0,width:"100%",height:"100%",helpers:{overlay:{css:{background:"rgba(27, 71, 105, 0.7)"}}}})}});var FeaturesPlatesSlider={el:".js-features-plates",name:"FeaturesPlatesSlider",initialize:function(){this.$el.slick({slide:".features-plates__slide",dots:!0,arrows:!1,autoplay:!0,autoplaySpeed:5e3})}};App.Control.install(FeaturesPlatesSlider),App.Control.install({el:".js-form",name:"FormFabric",disabledModals:"false",submitButton:".js-form-submit",parsleyValidateOpts:{errorsMessagesDisabled:!0,errorClass:"_error",successClass:"_success",classHandler:function(t){return t.$element.next(".select2")}},$validateFalseFields:null,initialize:function(){var t=this;this.$("input[name]").on("focus",function(){t.disableModals()}),this.$(".js-select-editable").select2({minimumResultsForSearch:1/0,theme:"editable"}),this.$(".js-form-select").select2({minimumResultsForSearch:1/0,theme:"form-select"}),this.$(".js-form-select-trademark").select2({minimumResultsForSearch:1/0,theme:"form-select form-trademark"}),this.$(".js-form-select-in-modal").select2({minimumResultsForSearch:1/0,theme:"form-select form-select-in-modal"}),this.multiSelectInputs=this.$el.find(".js-form-multiselect"),this.choiseRadioContent=this.$el.find(".js-form-radio-choise"),this.choiseTabsContent=this.$el.find(".js-form-tabs-changer"),this.privacyAgree=this.$el.find(".js-form-privacy-agree"),this.choiseRadioContent&&this.initRadioChoisingControl(),this.choiseTabsContent&&this.initTabsContentControl(),this.privacyAgree&&this.initPrivacyAgree(),this.multiSelectInputs&&this.initMultiSelectControl(),this.$el.hasClass("js-form-hide-btn")&&this.hideContactsBtn(),this.$el.find("input[type='tel']").inputmask({alias:"phoneru"}),this.$el.find("input[type='tel']").parsley({phone:""}),_.isElement(this.$el.find(this.submitButton)[0])&&this.$el.find(this.submitButton).on("click",this.$el,_.bind(this.submitProcess,this)),this.gateway=this.buildGatewayPath(),this.$validateFalseFields=$([]);var e=this.$el.find('input[name="form"]').val();this.$el.find('input[name="form_'+e+'[pageH1]"]').val($("h1").html()),this.$el.find('input[name="form_'+e+'[pageTitle]"]').val($("title").html())},disableModals:function(){if(!this.disableModals){if(jivo_api.close(),window.BlockPopMechanic=!0,void 0!==window.hellobarSiteSettings)for(var t in window.hellobarSiteSettings.rules[0].site_elements)hellobar("elements").findById(window.hellobarSiteSettings.rules[0].site_elements[t].id).minimize();this.disableModals=!0}},enableModals:function(){this.disableModals&&(setTimeout(function(){isInputFocused||(jivo_api.open(),isFormHidden=!1)},3e3),window.BlockPopMechanic=!1,this.disableModals=!1)},buildGatewayPath:function(){var t;return(t=this.$el.data("gateway")?new URI(this.$el.data("gateway")):new URI).setSearch("AJAX","Y").toString(),t},validateForm:function(t){if(_.isEmpty(this.$el.data("novalidate"))){var n,s,a=this,o=!0;return this.$validateFalseFields=$([]),t.each(function(t,e){var i=$(this);(n=i.parsley(a.parsleyValidateOpts)).off("field:success"),n.off("field:error"),n.on("field:success",function(){a.$validateFalseFields=a.$validateFalseFields.not(i),a.checkValidateState()}),n.on("field:error",function(){a.$validateFalseFields.filter(i).length||a.$validateFalseFields.push(i.get()[0]),a.checkValidateState()}),s=n.validate(),_.isBoolean(s)&&!0===s?_.noop():o=!1}),o}return!0},checkValidateState:function(){this.$validateFalseFields.length?this.$el.find(this.submitButton).addClass("_disabled"):this.$el.find(this.submitButton).removeClass("_disabled")},submitProcess:function(t){var e=this.collectInitedInputs();this.validateForm(e)&&(this.waitingStateOn(),this.submitData(e))},submitData:function(t){var n=this;$.ajax({url:n.gateway,data:n.formData(t),processData:!1,contentType:!1,type:"POST"}).always(function(t,e,i){n.afterSubmitSuccess(t,i)})},afterSubmitSuccess:function(t,e){this.enableModals(),this.waitingStateOff()},collectInitedInputs:function(){var t=this.$el.find(":input").not("button");return t.filter(":visible").add(this.$el.find(".input-file").filter(":visible").find(":file")).add(this.$el.find(".input-multifile").filter(":visible").find(":file")).add(t.filter("input[type=hidden]")).add(t.filter("[data-mustvalidate]"))},formData:function(t){var e=$(document.createElement("form"));return t.each(function(){var t=$($(this).clone());t.is("select")&&t.val($(this).val()),t.appendTo(e)}),new FormData(e[0])},waitingStateOn:function(){$(document.createElement("div")).addClass("ui-loader").prependTo(this.$el)},waitingStateOff:function(){this.$el.find(".ui-loader").remove()},initMultiSelectControl:function(){_.each(this.multiSelectInputs,function(t){$multiSelect=$(t);var e=_.isEmpty($multiSelect.data("emptyText"))?"Ничго не выбрано":$multiSelect.data("emptyText");this.$(".js-form-multiselect").selectpicker({selectedTextFormat:"count > 2",selectOnTab:!0,noneSelectedText:e})})},initPrivacyAgree:function(){var t=this;this.privacyAgree.find(".js-form-privacy-agree-responsive-btn").on("click",function(){t.privacyAgree.find(".js-form-privacy-agree-full").removeClass("hide-up-to-md hide-xs"),t.privacyAgree.find(".js-form-privacy-agree-short").hide(0)}),this.privacyAgree.find(".js-form-privacy-agree-close-btn").on("click",function(){t.privacyAgree.find(".js-form-privacy-agree-full").addClass("hide-xs"),t.privacyAgree.find(".js-form-privacy-agree-short").show(0)})},hideContactsBtn:function(){var t=this,i=!1,n=!1;this.formInputs=t.$el.find("[data-attribute]"),t.formInputs.on("focus",function(t){i=!0,this.dataTarget=$(t.currentTarget).attr("data-attribute"),n||($("[data-target="+this.dataTarget+"]").hide(300),n=!0)}),t.formInputs.on("blur",function(t){i=!1;var e=this;this.dataTarget=$(t.currentTarget).attr("data-attribute"),n&&setTimeout(function(){i||($("[data-target="+e.dataTarget+"]").show(300),n=!1)},5e3)})},initTabsContentControl:function(){var e=this;_.each(this.choiseTabsContent,function(t){$tabsContent=$(t),$controlBtns=$tabsContent.find(".js-form-tabs-changer-btns").find("span"),$controlTabs=$tabsContent.find(".js-form-tabs-changer-content").find(".js-form-tabs-changer-block"),$controlTabs.hide(0),0<$controlBtns.length&&($activeBtn=$controlBtns.eq(0),$controlBtns.not($activeBtn).addClass("dotted cur-pointer"),$activeTab=$controlTabs.eq(0),$activeTab.show(0)),$controlBtns.on("click",function(){e.contentTabChange($(this))})})},contentTabChange:function(t){$tabsContent=t.closest(".js-form-tabs-changer"),$controlBtns=$tabsContent.find(".js-form-tabs-changer-btns").find("span"),$controlTabs=$tabsContent.find(".js-form-tabs-changer-content").find(".js-form-tabs-changer-block"),t.removeClass("dotted cur-pointer"),$tab2Show=$controlTabs.eq($controlBtns.index(t)),$controlTabs.not($tab2Show).hide(0),$tab2Show.show(0),$controlBtns.not(t).addClass("dotted cur-pointer")},initRadioChoisingControl:function(){var e=this;_.each(this.choiseRadioContent,function(t){$control=$(t),$controlRadios=$control.find('input[type="radio"]'),$controledBlocks=$controlled=e.findClosestChoisingBlock($control).find(".js-form-radio-content-block"),$controledBlocks.hide(0),$activeRadioOpt=$controlRadios.filter(":checked"),$activeRadioOpt&&($activeOptIndex=$controlRadios.index($activeRadioOpt),0<=$activeOptIndex&&$controledBlocks.eq($activeOptIndex).show(0)),$controlRadios.on("click",function(){e.choisingBlockChange($(this))})})},choisingBlockChange:function(t){$control=t.closest(".js-form-radio-choise"),$controledBlocks=this.findClosestChoisingBlock($control).find(".js-form-radio-content-block"),$block2Show=$controledBlocks.eq($control.find('input[type="radio"]').index(t)),$controledBlocks.not($block2Show).hide(0),$block2Show.show(0)},findClosestChoisingBlock:function(t){return 0<t.parent().length?($findRes=t.parent().find(".js-form-radio-content"),0<$findRes.length?$($findRes[0]):this.findClosestChoisingBlock(t.parent())):$()}});var LightBox={el:".js-lightbox",name:"LightBox",initialize:function(){},events:{"click .js-lightbox__trigger":"toggleLightBox"},toggleLightBox:function(t){t.preventDefault(),this.targetId=$(t.currentTarget).data("id"),$("#"+this.targetId).addClass("_open")}};App.Control.install(LightBox);var MainNav={el:".js-main-nav",name:"MainNav",initialize:function(){this.toggleBtn=this.$(".js-main-nav__toggle"),this.innerMenu=this.$(".js-main-nav__inner-menu")},events:{"click .js-main-nav__toggle":"toggleMenu"},toggleMenu:function(t){t.preventDefault(),this.toggleBtn.toggleClass("_is-open"),this.innerMenu.toggleClass("_is-open"),$("body").toggleClass("_is-open-menu")}};App.Control.install(MainNav);var ShowContent={el:".js-show-content",name:"ShowContent",initialize:function(){this.btn=this.$(".js-show-content__btn"),this.hiddenContent=this.$(".js-show-content__content"),this.hiddenBlock=this.$(".js-show-content__block")},events:{"click .js-show-content__btn":"showContent"},showContent:function(t){t.preventDefault(),this.hiddenContent.slideDown().removeClass("_hidden"),this.btn.filter("[data-hidden]")&&this.btn.addClass("_hidden"),this.$el.filter("[data-attribute]")&&(this.dataTarget=$(t.currentTarget).attr("data-attribute"),this.$el.find($("[data-target="+this.dataTarget+"]")).slideToggle())}};App.Control.install(ShowContent);var StatsTooltip={el:".js-stats-tooltip",name:"StatsTooltip",initialize:function(){this.$el.tooltipster({animation:"fade",delay:200,maxWidth:340,theme:["tooltipster-light-customized"]})}};App.Control.install(StatsTooltip);var TabsControl={el:".js-tabs",name:"Tabs",initialize:function(){this.tab=this.$(".js-tabs__tab"),this.tabsOpened=this.$(".js-tabs__tab.is-open"),this.tabsList=this.$(".js-tabs__list"),this.tabContent=this.$(".js-tabs__content")},events:{"click .js-tabs__tab":"switchTabOnClick"},switchTabOnClick:function(t){this.tab.removeClass("_active"),$(t.currentTarget).addClass("_active"),this.targetId=$(t.currentTarget).data("id"),this.tabContent.removeClass("_active"),$("#"+this.targetId).addClass("_active")}};App.Control.install(TabsControl);